---
title: "Attitudes towards outreach in particle physics"
author: "Achintya Rao"
date: "26 April 2016"
output:
    revealjs::revealjs_presentation:
        theme: serif
        highlight: pygments
        incremental: true
        center: true
        transition: slide
        reveal_options:
            slideNumber: true
        fig_caption: true
        showNotes: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
dat <- read.csv(file = "../quant_analysis/final_dataset.csv", header = TRUE)
countries  <- read.csv(file = "data/countries.csv", header = TRUE)
library(dplyr)
library(plotly)
library(gridExtra)

# for long form conversion of data frame
library(reshape2)

likert_units <- seq(0.0000, 5.0000, by=1)
```

---

## A bit about me

> - **Science Communicator** (2010 &mdash; present)<br />Compact Muon Solenoid 
(CMS) Collaboration at CERN
> - **Doctoral Student** (2014 &mdash; present)<br />UWE Science Communication 
Unit, Bristol
>     - **MA in Science Journalism** (2009 &mdash; 2010)<br />City University, 
London
>     - **BSc in Physics** (2005 &mdash; 2008)<br />St. Xavierâ€™s College, 
Mumbai (Bombay)

<br />
<br />
<small>Twitter: [\@RaoOfPhysics](https://twitter.com/RaoOfPhysics) | 
GitHub: [\@RaoOfPhysics](https://github.com/RaoOfPhysics)</small>

---

<section data-background="https://cds.cern.ch/record/1363014/files/IMG_9286.JPG?subformat=icon-1440">

##

- [CERN](http://home.cern), the European Laboratory for Particle Physics
    - Geneva, Switzerland
    - host laboratory for international collaborations
    - ~half of all 20,000 particle physicists

##

- The [Compact Muon Solenoid (CMS) Collaboration](http://cms.web.cern.ch)
    - one of the two teams that [discovered the Higgs boson in 2012](http://cms.web.cern.ch/news/observation-new-particle-mass-125-gev)
    - breakdown of collaborators as of June 2015
        - over 4000 physicists, engineers, students  (not including technicians 
        and admin)
        - 183 institutes, universities, laboratories from 42 countries
        - 80+ nationalities

</section>

---

<section><h1>Data collection for quantitative analysis</h1>

## Electronic survey distributed by e-mail

- Sent to the whole collaboration via mailing list
- Three reminders sent to whole list
- Engineers reminded separately as well
- Representatives from low-response countries reminded separately

## Responses

- over 400, but a few duplicates
- final count: **391** valid responses
- ~10% of the collaboration

## CMS member countries

```{r}
# Code below by Rik Smith-Unna (@Blahah on GitHub)

# precompute the plot variable - this is required because we'll
# need to 'melt' the dataframe into long format, which will
# mix values from different variables in a column
countries$Country_Response_pc <- 
    countries$Country_Response / countries$Country_Total * 100

countries$Country <- factor(countries$Country, levels=arrange(countries, -Country_Response)$Country)

# select only the columns we need, then reshape
# the data frame by 'melting' it to long form.
# we only have one 'id variable' - country, so
# all the other variables will be collapsed
# into just two columns: variable and value
# we go from one row per country, to one row per value per country
# this is the format ggplot always uses - and it's super powerful
countries_long <- melt(
    countries[, c('Country', 'Country_Response', 'Country_Response_pc')],
    id=c('Country')
    )

# now just set x as country, but colour bars by another variable
p <- ggplot(countries_long, aes(x=Country, y=value, fill=variable)) +
    # we also need to specify that we want to use the values,
    # rather than the number of occurences, as the bar size
    # and that we want the bars side by side 'dodge' rather than 
    # stacked
    geom_bar(stat='identity', position=position_dodge(), color="white") + 
        coord_cartesian(ylim=c(0, 50))

ggplotly()

```

## Gender

```{r}
ggplot(dat, aes(x = gender)) +
    geom_bar(width=0.8)
```

## Age

```{r}
dat.reduced <- filter(dat, age >= "25", age < "85")

# Code below by Rik Smith-Unna (@Blahah on GitHub)

# create a vector of breaks, starting at N, then one less than each multiple
# of 10 up to the next highest multiple of ten after the maximum value
# in the data
breaks <- c(25, # start at 25, here. the c() funcion creates a vector,
            # and flattens any vectors passed in.
            # e.g try c(c(1,2,3), c(4,5,6))
            # the second argument to c() here is a sequence
            # it starts at 35
            seq(35, 
                # and ends at the maximum value rounded up to the nearest
                # multiple of ten. We get that multiple by using a feature of
                # the round() function. The first argument to round() is the
                # number to be rounded. The second is the number of digits
                # to round it to - unless the number is negative, in which
                # case it is treated as a (positive) power of ten to which
                # the number will be rounded
                round(max(dat.reduced$age + 5), -1),
                # the sequence should have step sizes of ten
                by = 10)
            # we take the sequence from 10..rounded(max) and take 1 away from 
            # it. This is a vector operation - it takes 1 from every value.
            # this lets us go from 10, 20, 30... to 9, 19, 29...
            - 1)

ggplot(dat.reduced, aes(x = age)) +
    geom_histogram(breaks = breaks) +
    stat_bin(breaks = breaks,
             aes(y=..count.., label=..count..),
             geom="text",
             vjust=-0.5)
    
```

</section>

---

<section><h1>Attitudes towards specific groups</h1>

## Colleagues

```{r}
att_colleagues <- melt(as.matrix(
    dat[c('imp_colleagues', 'knol_colleagues', 'easy_colleagues')]
    ))

p <- ggplot(att_colleagues, aes(x=value, fill=Var2)) +
    geom_bar(stat='count', position="dodge", color="white")

ggplotly()
```

## Students

```{r}
att_students <- melt(as.matrix(
    dat[c('imp_students', 'knol_students', 'easy_students')]
    ))

p <- ggplot(att_students, aes(x=value, fill=Var2)) +
    geom_bar(stat='count', position="dodge", color="white")

ggplotly()
```

## Science Journalists

```{r}
att_scijournos <- melt(as.matrix(
    dat[c('imp_scijournos', 'knol_scijournos', 'easy_scijournos')]
    ))

p <- ggplot(att_scijournos, aes(x=value, fill=Var2)) +
    geom_bar(stat='count', position="dodge", color="white")

ggplotly()
```

## Non-specialist public

```{r}
att_NSP <- melt(as.matrix(
    dat[c('imp_NSP', 'knol_NSP', 'easy_NSP')]
    ))

p <- ggplot(att_NSP, aes(x=value, fill=Var2)) +
    geom_bar(stat='count', position="dodge", color="white")

ggplotly()
```

</section>